<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>系统对话框示例</title>
    <link rel="stylesheet" href="/static/css/app.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>系统对话框示例</h1>
        </div>
        
        <div class="content">
            <div class="card">
                <div class="card-header">
                    <h2>消息对话框</h2>
                </div>
                <div class="card-body">
                    <div class="form-group">
                        <label for="messageText">消息内容</label>
                        <input type="text" id="messageText" class="form-control" value="这是一个消息对话框">
                    </div>
                    
                    <div class="form-group">
                        <label for="messageTitle">标题</label>
                        <input type="text" id="messageTitle" class="form-control" value="消息">
                    </div>
                    
                    <div class="form-group">
                        <label for="messageType">类型</label>
                        <select id="messageType" class="form-control">
                            <option value="info">信息</option>
                            <option value="error">错误</option>
                            <option value="warning">警告</option>
                            <option value="question">问题</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="messageButtons">按钮（用逗号分隔）</label>
                        <input type="text" id="messageButtons" class="form-control" value="确定">
                    </div>
                    
                    <div class="form-group">
                        <button class="btn btn-primary" onclick="showMessage()">显示消息对话框</button>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h2>确认对话框</h2>
                </div>
                <div class="card-body">
                    <div class="form-group">
                        <label for="confirmText">消息内容</label>
                        <input type="text" id="confirmText" class="form-control" value="您确定要执行此操作吗？">
                    </div>
                    
                    <div class="form-group">
                        <label for="confirmTitle">标题</label>
                        <input type="text" id="confirmTitle" class="form-control" value="确认">
                    </div>
                    
                    <div class="form-group">
                        <label for="confirmButtons">按钮（用逗号分隔）</label>
                        <input type="text" id="confirmButtons" class="form-control" value="取消,确认">
                    </div>
                    
                    <div class="form-group">
                        <button class="btn btn-primary" onclick="showConfirm()">显示确认对话框</button>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h2>输入对话框</h2>
                </div>
                <div class="card-body">
                    <div class="form-group">
                        <label for="promptText">消息内容</label>
                        <input type="text" id="promptText" class="form-control" value="请输入内容：">
                    </div>
                    
                    <div class="form-group">
                        <label for="promptTitle">标题</label>
                        <input type="text" id="promptTitle" class="form-control" value="输入">
                    </div>
                    
                    <div class="form-group">
                        <label for="promptDefaultValue">默认值</label>
                        <input type="text" id="promptDefaultValue" class="form-control" value="">
                    </div>
                    
                    <div class="form-group">
                        <label for="promptPlaceholder">占位符</label>
                        <input type="text" id="promptPlaceholder" class="form-control" value="请输入...">
                    </div>
                    
                    <div class="form-group">
                        <button class="btn btn-primary" onclick="showPrompt()">显示输入对话框</button>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h2>文件对话框</h2>
                </div>
                <div class="card-body">
                    <div class="form-group">
                        <button class="btn btn-primary" onclick="openFile()">打开文件</button>
                        <button class="btn btn-primary" onclick="saveFile()">保存文件</button>
                        <button class="btn btn-primary" onclick="selectFolder()">选择文件夹</button>
                    </div>
                    
                    <div class="form-group">
                        <label for="fileFilters">文件过滤器（JSON格式）</label>
                        <textarea id="fileFilters" class="form-control" rows="3">[
    {"name": "所有文件", "extensions": ["*"]},
    {"name": "图片", "extensions": ["jpg", "png", "gif"]},
    {"name": "文档", "extensions": ["doc", "docx", "pdf"]}
]</textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="fileDefaultPath">默认路径</label>
                        <input type="text" id="fileDefaultPath" class="form-control" value="">
                    </div>
                    
                    <div class="form-group">
                        <div class="checkbox-group">
                            <label>
                                <input type="checkbox" id="fileMultiSelections"> 允许多选
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h2>其他对话框</h2>
                </div>
                <div class="card-body">
                    <div class="form-group">
                        <button class="btn btn-primary" onclick="showColorDialog()">颜色选择</button>
                        <button class="btn btn-primary" onclick="showFontDialog()">字体选择</button>
                        <button class="btn btn-primary" onclick="showCertificateDialog()">证书选择</button>
                    </div>
                    
                    <div class="form-group">
                        <label for="colorDefaultValue">默认颜色</label>
                        <input type="color" id="colorDefaultValue" class="form-control" value="#000000">
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h2>结果</h2>
                </div>
                <div class="card-body">
                    <pre id="resultOutput" class="result-output">暂无结果</pre>
                </div>
            </div>
        </div>
    </div>
    
    <script src="/static/js/app.js"></script>
    <script>
        // 显示消息对话框
        function showMessage() {
            const message = document.getElementById('messageText').value;
            const title = document.getElementById('messageTitle').value;
            const type = document.getElementById('messageType').value;
            const buttons = document.getElementById('messageButtons').value.split(',');
            
            fetch('/dialog/message', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    message,
                    title,
                    type,
                    buttons,
                }),
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showResult('消息对话框', data);
                } else {
                    showNotification('错误', '显示消息对话框失败');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                showNotification('错误', '显示消息对话框失败');
            });
        }
        
        // 显示确认对话框
        function showConfirm() {
            const message = document.getElementById('confirmText').value;
            const title = document.getElementById('confirmTitle').value;
            const buttons = document.getElementById('confirmButtons').value.split(',');
            
            fetch('/dialog/confirm', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    message,
                    title,
                    buttons,
                }),
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showResult('确认对话框', data);
                } else {
                    showNotification('错误', '显示确认对话框失败');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                showNotification('错误', '显示确认对话框失败');
            });
        }
        
        // 显示输入对话框
        function showPrompt() {
            const message = document.getElementById('promptText').value;
            const title = document.getElementById('promptTitle').value;
            const defaultValue = document.getElementById('promptDefaultValue').value;
            const placeholder = document.getElementById('promptPlaceholder').value;
            
            fetch('/dialog/prompt', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    message,
                    title,
                    default_value: defaultValue,
                    placeholder,
                }),
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showResult('输入对话框', data);
                } else {
                    showNotification('错误', '显示输入对话框失败');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                showNotification('错误', '显示输入对话框失败');
            });
        }
        
        // 打开文件
        function openFile() {
            const defaultPath = document.getElementById('fileDefaultPath').value;
            const filtersText = document.getElementById('fileFilters').value;
            const multiSelections = document.getElementById('fileMultiSelections').checked;
            
            let filters = [];
            try {
                filters = JSON.parse(filtersText);
            } catch (error) {
                showNotification('错误', '文件过滤器格式不正确');
                return;
            }
            
            fetch('/dialog/openFile', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    title: '打开文件',
                    default_path: defaultPath,
                    filters,
                    multi_selections: multiSelections,
                }),
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showResult('打开文件对话框', data);
                } else {
                    showNotification('错误', '显示打开文件对话框失败');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                showNotification('错误', '显示打开文件对话框失败');
            });
        }
        
        // 保存文件
        function saveFile() {
            const defaultPath = document.getElementById('fileDefaultPath').value;
            const filtersText = document.getElementById('fileFilters').value;
            
            let filters = [];
            try {
                filters = JSON.parse(filtersText);
            } catch (error) {
                showNotification('错误', '文件过滤器格式不正确');
                return;
            }
            
            fetch('/dialog/saveFile', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    title: '保存文件',
                    default_path: defaultPath,
                    filters,
                }),
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showResult('保存文件对话框', data);
                } else {
                    showNotification('错误', '显示保存文件对话框失败');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                showNotification('错误', '显示保存文件对话框失败');
            });
        }
        
        // 选择文件夹
        function selectFolder() {
            const defaultPath = document.getElementById('fileDefaultPath').value;
            
            fetch('/dialog/selectFolder', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    title: '选择文件夹',
                    default_path: defaultPath,
                }),
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showResult('选择文件夹对话框', data);
                } else {
                    showNotification('错误', '显示选择文件夹对话框失败');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                showNotification('错误', '显示选择文件夹对话框失败');
            });
        }
        
        // 显示颜色选择对话框
        function showColorDialog() {
            const defaultColor = document.getElementById('colorDefaultValue').value;
            
            fetch('/dialog/color', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    title: '选择颜色',
                    default_color: defaultColor,
                }),
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showResult('颜色选择对话框', data);
                    if (data.result) {
                        document.getElementById('colorDefaultValue').value = data.result;
                    }
                } else {
                    showNotification('错误', '显示颜色选择对话框失败');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                showNotification('错误', '显示颜色选择对话框失败');
            });
        }
        
        // 显示字体选择对话框
        function showFontDialog() {
            fetch('/dialog/font', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    title: '选择字体',
                }),
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showResult('字体选择对话框', data);
                } else {
                    showNotification('错误', '显示字体选择对话框失败');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                showNotification('错误', '显示字体选择对话框失败');
            });
        }
        
        // 显示证书选择对话框
        function showCertificateDialog() {
            fetch('/dialog/certificate', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    title: '选择证书',
                }),
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showResult('证书选择对话框', data);
                } else {
                    showNotification('错误', '显示证书选择对话框失败');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                showNotification('错误', '显示证书选择对话框失败');
            });
        }
        
        // 显示结果
        function showResult(title, data) {
            const resultOutput = document.getElementById('resultOutput');
            resultOutput.textContent = `${title}结果：\n${JSON.stringify(data, null, 2)}`;
            
            showNotification('成功', `${title}已显示`);
        }
        
        // 显示通知
        function showNotification(title, body) {
            if (typeof window.NativePHP !== 'undefined') {
                window.NativePHP.notification.send(title, body);
            } else {
                alert(`${title}: ${body}`);
            }
        }
    </script>
</body>
</html>
